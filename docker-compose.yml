services:

  channels:
    build: ./video-stream-channels
    container_name: channels
    ports:
      - "2276:2276"

  media:
    build: ./video-stream-media
    container_name: media
    depends_on:
      - channels
    ports:
      - "1935:1935"   # RTMP ingest
      - "8000:8000"   # HTTP HLS playback
    environment:
      - NODE_ENV=production
    volumes:
      - ./media:/app/media

  ui:
    build: ./video-stream-ui
    container_name: ui
    ports:
    - "3000:3000"